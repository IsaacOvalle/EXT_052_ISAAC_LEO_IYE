<!DOCTYPE html> 
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BRAZUK - Cuenta</title>
<style>
:root{--menu-width:180px;}
*{box-sizing:border-box;margin:0;padding:0;font-family: Arial, sans-serif;}
body{background:#fff;color:#000;overflow-x:hidden;}
.page-content{transition: transform 0.32s ease; will-change: transform;}
header{background:#f4c52b; display:flex; align-items:center; justify-content:space-between; padding:10px 18px; height:60px; position: sticky; top: 0; z-index:3;}
header::after {content: ""; display:block; height:1px; background:#fff; position:absolute; bottom:0; left:0; width:100%;}
.left-header{display:flex; align-items:center; gap:10px;}
.menu-btn, .menu-icon{font-size:26px; cursor:pointer; user-select:none;}
.logo{font-weight:700; font-size:20px; color:#000; text-decoration:none; cursor:pointer;}
.profile-icon{border:2px solid #000; border-radius:50%; padding:6px; cursor:pointer; width:50px; height:50px; background-size: cover; background-position: center;}

.user-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  font-size: 16px;
  color: #000;
}

.aviso-logo {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(255, 255, 0, 0.9);
  padding: 8px 12px;
  border-radius: 6px;
  box-shadow: 0 0 6px rgba(0,0,0,0.3);
  font-size: 14px;
  z-index: 9999;
  display: flex;
  align-items: center;
  gap: 8px;
  color: #000; 
  font-weight: bold; 
  white-space: nowrap;
}

.aviso-logo button.cerrar-aviso {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  padding: 0;
  margin: 0;
  color: #000; 
}

/* Men√∫ lateral izquierdo */
.menu-lateral{
  position:fixed;
  top:0;
  left:0;
  height:100vh;
  transform: translateX(-100%);
  background:#f4c52b;
  box-shadow:3px 0 14px rgba(0,0,0,0.15);
  padding-top:80px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  z-index:4;
  transition: transform 0.32s ease;
  width:var(--menu-width);
}
.menu-lateral.abierto{
  transform:translateX(0);
}

/* Men√∫ derecho */
.menu-derecha{
  position: fixed;
  top: 0;
  right: -180px;
  height: 100vh;
  width: var(--menu-width);
  background: #f4c52b;
  box-shadow: -3px 0 14px rgba(0,0,0,0.15);
  padding-top: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  z-index: 4;
  transition: right 0.32s ease;
}
.menu-derecha.abierto {
  right: 0;
}

/* Botones de men√∫ */
.menu-lateral button, .menu-derecha button{
  width:80%;
  background:#baf46a;
  color:#000;
  border:none;
  border-radius:20px;
  padding:10px 12px;
  font-weight:600;
  cursor:pointer;
  text-align:center;
}
.menu-lateral button:hover, .menu-derecha button:hover{background:#a4e45a;}

main{padding:40px 20px; text-align:center;}
.Box{background:transparent; width:100%; max-width:420px; margin:0 auto; padding:20px; display:flex; flex-direction:column; gap:16px; border-radius:12px;}
label{font-weight:bold; display:block; margin-bottom:6px; text-align:left;}
input[type="text"], input[type="password"]{width:100%; padding:10px; border:1px solid #000; border-radius:3px; background:#baf46a; font-size:15px;}
input[type="submit"], button{width:100%; background:#000; color:#fff; border:none; padding:12px; font-weight:600; cursor:pointer; transition:0.2s;}
input[type="submit"]:hover, button:hover{background:#333;}
.botonNegro{margin-top:16px;}
h2{font-size:28px; margin-bottom:20px; font-weight:700;}


</style>
</head>
<body>

  <div id="avisoLogo" class="aviso-logo">
  <span>Pulsa en editar datos para poder cambiar tu nombre, correo, contrase√±a o fecha de nacimiento</span>
  <button class="cerrar-aviso">√ó</button>
</div>

<!-- Men√∫ lateral izquierdo -->
<div class="menu-lateral" id="menuLateral">
  <button onclick="location.href='Segundo avance_Ver historial.html'">Historial</button>
  <button onclick="location.href='Segundo avance_Ver guardados.html'">Guardados</button>
  <button onclick="location.href='Segundo avance_Ver me gustas.html'">Me gusta</button>
</div>

<!-- Men√∫ lateral derecho (perfil) -->
<div class="menu-derecha" id="menuPerfil">
  <button onclick="location.href='Cuenta.html'">Cuenta</button>
  <button onclick="location.href='Segundo avance_Usuario.html'">Ver mi foro</button>

  <!-- Botones que se ocultar√°n si NO eres admin -->
  <button id="btnSolicitudes" onclick="location.href='Segundo avance_Solicitudes.html'">Solicitudes</button>
  <button id="btnBaneados" onclick="location.href='Segundo avance_Baneados.html'">Baneados</button>
  <button id="btnDadasBaja" onclick="location.href='Segundo Avance_Publicaciones baneadas.html'">Dadas de baja</button>

  <button id="toggleAspecto">Aspecto: Cla/Osc</button>
  <button onclick="location.href='BrazukaR.html'">Salir</button>
</div>


<div class="page-content" id="pageContent">
<header>
  <div class="logo-container left-header">
    <span class="menu-icon" id="menuBtn">‚ò∞</span>
    <a href="Segundo avance_Pagina Principal.html" class="logo">BRAZUK</a>
  </div>

  <div class="user-info">
    <span id="nombreUsuarioHeader"></span>
    <div class="profile-icon" id="profileIcon">üë§</div>
  </div>
</header>

<main>
  <h2><span id="nombreUsuarioMain"></span></h2>
  <h2>Mi Cuenta</h2>

<div class="Box">
  <label>Nombre:</label>
  <input type="text" id="nombre" disabled />
  <label>Correo:</label>
  <input type="text" id="correo" disabled />
  <label>Contrase√±a:</label>
  <input type="text" id="contrasena" disabled style="background:#baf46a;" />
  <label>Fecha de nacimiento:</label>
  <input type="text" id="fecha" disabled />
  <button id="editarDatosBtn">Editar Datos</button>
  <form action="BrazukaIS.html" method="get">
    <input type="submit" value="Cerrar Sesi√≥n">
  </form>
</div>

<!-- Modal para editar datos -->
<div id="modalEditar" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:10;">
  <div style="background:#fff; padding:20px; border-radius:10px; max-width:400px; width:90%;">
    <h3>Editar Datos</h3>
    <label>Nombre:</label>
    <input type="text" id="nuevoNombre" />
    <label>Correo:</label>
    <input type="text" id="nuevoCorreo" />
    <label>Contrase√±a:</label>
    <input type="password" id="nuevaContrasena" />
    <label>Fecha de nacimiento:</label>
    <input type="date" id="nuevaFecha" />
    <div style="display:flex; justify-content:space-between; margin-top:20px;">
      <button id="cancelarEdicion">Cancelar</button>
      <button id="confirmarEdicion">Confirmar</button>
    </div>
  </div>
</div>

<script>

// FOTO DE PERFIL SEG√öN EL ROL

const profileIcon = document.getElementById('profileIcon');

const rol = localStorage.getItem("rolUsuario") || "invitado";

const fotos = {
  admin: "https://static.vecteezy.com/system/resources/previews/014/541/527/original/administrator-system-icon-simple-style-vector.jpg",
  usuario: "https://i0.wp.com/icon-library.com/images/user-icon-png-transparent/user-icon-png-transparent-17.jpg",
  invitado: "https://static.vecteezy.com/system/resources/previews/008/302/462/large_2x/eps10-grey-user-icon-or-logo-in-simple-flat-trendy-modern-style-isolated-on-white-background-free-vector.jpg"
};

profileIcon.textContent = "";
profileIcon.style.backgroundImage = `url('${fotos[rol]}')`;
profileIcon.style.backgroundSize = "cover";
profileIcon.style.backgroundPosition = "center";

// Ocultar botones seg√∫n el rol
if (rol !== "admin") {
  document.getElementById("btnSolicitudes").style.display = "none";
  document.getElementById("btnBaneados").style.display = "none";
  document.getElementById("btnDadasBaja").style.display = "none";
}

// Men√∫s laterales y desplazamiento
const pageContent = document.getElementById('pageContent');
const menuIconBtn = document.getElementById('menuBtn');
const menuLateral = document.getElementById('menuLateral');
const menuPerfil = document.getElementById('menuPerfil');

function cerrarMenus(){
  menuLateral.classList.remove('abierto');
  menuPerfil.classList.remove('abierto');
  pageContent.style.transform = 'translateX(0)';
}

// Men√∫ izquierdo
menuIconBtn.addEventListener('click', (e)=>{
  e.stopPropagation();
  const abierto = menuLateral.classList.toggle('abierto');
  menuPerfil.classList.remove('abierto');
  pageContent.style.transform = abierto ? `translateX(${menuLateral.offsetWidth}px)` : 'translateX(0)';
});

// Men√∫ derecho
profileIcon.addEventListener('click', (e)=>{
  e.stopPropagation();
  const abierto = menuPerfil.classList.toggle('abierto');
  menuLateral.classList.remove('abierto');
  pageContent.style.transform = abierto ? `translateX(-${menuPerfil.offsetWidth}px)` : 'translateX(0)';
});

// Cerrar al hacer click fuera
document.body.addEventListener('click', (e)=>{
  if(!menuLateral.contains(e.target) &&
     !menuIconBtn.contains(e.target) &&
     !menuPerfil.contains(e.target) &&
     !profileIcon.contains(e.target)){
       cerrarMenus();
  }
});
menuLateral.addEventListener('click', e=>e.stopPropagation());
menuPerfil.addEventListener('click', e=>e.stopPropagation());

// Mostrar datos del usuario
const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
const nombreUsuario = localStorage.getItem("nombreUsuario") || "Invitado";
document.getElementById("nombreUsuarioHeader").textContent = nombreUsuario;
document.getElementById("nombreUsuarioMain").textContent = nombreUsuario;

// Buscar datos completos del usuario registrado
const usuarioActual = usuarios.find(u => u.nombre === nombreUsuario);
if(usuarioActual){
  document.getElementById("nombre").value = usuarioActual.nombre;
  document.getElementById("correo").value = usuarioActual.correo;
  document.getElementById("fecha").value = usuarioActual.fecha;
  document.getElementById("contrasena").value = usuarioActual.contrasena || '';
}

// ===== Modo claro/oscuro con persistencia =====
const btnModo = document.getElementById('toggleAspecto');
let modoOscuro = localStorage.getItem('modoBrazuk') === 'oscuro';

function aplicarModo(activar){
  modoOscuro = activar;
  const body = document.body;
  const header = document.querySelector('header');
  const logo = document.querySelector('.logo');
  const nombreUsuarioSpanHeader = document.getElementById('nombreUsuarioHeader');
  const nombreUsuarioSpanMain = document.getElementById('nombreUsuarioMain');

  if(modoOscuro){
    body.style.background='#000';
    body.style.color='#fff';
    header.style.background='#000';
    pageContent.style.background='#111';
    logo.style.color='#fff';
    nombreUsuarioSpanHeader.style.color='#fff';
    nombreUsuarioSpanMain.style.color='#fff';
    localStorage.setItem('modoBrazuk','oscuro');
  } else {
    body.style.background='#fff';
    body.style.color='#000';
    header.style.background='#f4c52b';
    pageContent.style.background='#fff';
    logo.style.color='#000';
    nombreUsuarioSpanHeader.style.color='#000';
    nombreUsuarioSpanMain.style.color='#000';
    localStorage.setItem('modoBrazuk','claro');
  }
}

aplicarModo(modoOscuro);
btnModo.addEventListener('click', ()=> aplicarModo(!modoOscuro));

// --- C√≥digo para editar datos ---
const editarBtn = document.getElementById('editarDatosBtn');
const modal = document.getElementById('modalEditar');
const cancelarEdicion = document.getElementById('cancelarEdicion');
const confirmarEdicion = document.getElementById('confirmarEdicion');

// Abrir modal y precargar datos actuales
editarBtn.addEventListener('click', ()=>{
  modal.style.display = 'flex';
  if(usuarioActual){
    document.getElementById('nuevoNombre').value = usuarioActual.nombre;
    document.getElementById('nuevoCorreo').value = usuarioActual.correo;
    document.getElementById('nuevaContrasena').value = usuarioActual.contrasena;
    document.getElementById('nuevaFecha').value = usuarioActual.fecha;
  }
});

// Cancelar edici√≥n
cancelarEdicion.addEventListener('click', (e)=>{
  e.preventDefault();
  modal.style.display = 'none';
});

// Confirmar edici√≥n con confirmaci√≥n
confirmarEdicion.addEventListener('click', (e)=>{
  e.preventDefault();
  if(confirm("¬øEst√°s seguro de actualizar tus datos?")){
    usuarioActual.nombre = document.getElementById('nuevoNombre').value;
    usuarioActual.correo = document.getElementById('nuevoCorreo').value;
    usuarioActual.contrasena = document.getElementById('nuevaContrasena').value;
    usuarioActual.fecha = document.getElementById('nuevaFecha').value;

    // Guardar el array de usuarios actualizado
    localStorage.setItem('usuarios', JSON.stringify(usuarios));
    localStorage.setItem('nombreUsuario', usuarioActual.nombre);

    // Actualizar la interfaz
    document.getElementById('nombre').value = usuarioActual.nombre;
    document.getElementById('correo').value = usuarioActual.correo;
    document.getElementById('fecha').value = usuarioActual.fecha;
    document.getElementById('contrasena').value = usuarioActual.contrasena;
    document.getElementById('nombreUsuarioHeader').textContent = usuarioActual.nombre;
    document.getElementById('nombreUsuarioMain').textContent = usuarioActual.nombre;

    modal.style.display = 'none';
    alert("Datos actualizados correctamente.");
  }
});
</script>


<script>
  document.querySelector(".cerrar-aviso").addEventListener("click", function () {
    document.getElementById("avisoLogo").style.display = "none";
  });
</script>

</body>
</html>
