<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BRAZUK - Ver lo que se habla</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif; }
body { background-color:#fff; overflow-x:hidden; }

/* HEADER */
header { background:#f4c52b; display:flex; align-items:center; justify-content:space-between; padding:0 20px; height:60px; border-bottom:2px solid #ccc; position:sticky; top:0; z-index:3; }
.logo { display:flex; align-items:center; font-weight:bold; font-size:22px; cursor:pointer; line-height:1; padding-top:2px; }
.menu-icon { font-size:22px; margin-right:10px; cursor:pointer; }
.search-bar { display:flex; align-items:center; background:#dfffb2; border-radius:25px; padding:5px 15px; width:40%; }
.search-bar input { border:none; outline:none; background:transparent; width:100%; padding:5px; font-size:16px; }
.search-bar button { background:none; border:none; cursor:pointer; font-size:18px; }
.profile-icon { border:2px solid #000; border-radius:50%; padding:6px; cursor:pointer; }

.user-info {
  display: flex;
  align-items: center;
  gap: 8px; /* espacio entre nombre y foto */
  font-weight: 600;
  font-size: 16px;
  color: #000; /* color por defecto, cambiar√° con JS para modo oscuro */
}

.profile-icon{
  border:2px solid #000;
  border-radius:50%;
  padding:6px;      
  cursor:pointer;
  width:50px;       
  height:50px;     
  background-size: cover;
  background-position: center;
}

/* MEN√öS */
.menu-lateral, .menu-derecha { position:fixed; top:0; height:100vh; background:#f4c52b; box-shadow:3px 0 14px rgba(0,0,0,0.15); padding-top:80px; display:flex; flex-direction:column; align-items:center; gap:12px; z-index:4; transition:transform 0.32s ease; min-width:180px; }
.menu-lateral { left:0; transform:translateX(-100%); }
.menu-lateral.abierto { transform:translateX(0); }
.menu-derecha { right:0; transform:translateX(100%); }
.menu-derecha.abierto { transform:translateX(0); }
.menu-lateral button, .menu-derecha button { width:80%; background:#baf46a; border:none; border-radius:20px; padding:10px 12px; font-weight:600; cursor:pointer; }
.menu-lateral button:hover, .menu-derecha button:hover { background:#a4e45a; }

/* CONTENIDO PRINCIPAL */
#pageContent { transition: transform 0.32s ease; will-change: transform; }
main { width:90%; margin:25px auto; background:#baf46a; border-radius:25px; padding:30px; position:relative; }

/* POST HEADER (T√≠tulo + botones + miniatura) */
.post-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:20px; position:relative; }
.post-content-wrapper { display:flex; flex-direction:column; width:calc(100% - 170px); } /* espacio para miniatura */
.post-title-actions { display:flex; align-items:center; justify-content:space-between; }
.post-header h1 { font-size:28px; margin:0; }

/* Botones Me gusta y Guardar */
.post-actions { display:flex; gap:10px; margin:0; }
.post-actions button { background:transparent; border:2px solid #f4c52b; border-radius:8px; cursor:pointer; font-weight:bold; font-size:16px; display:flex; align-items:center; gap:5px; padding:6px 12px; transition:0.2s; }
.post-actions button.active { background:#f4c52b; color:#000; border-color:#f4c52b; }

/* Miniatura arriba a la derecha */
.post-thumbnail {
    position:absolute;
    top:0;
    right:0;
    width:150px;
    border-radius:12px;
    overflow:hidden;
    border:2px solid #f4c52b;
}
.post-thumbnail img { width:100%; display:block; }

/* POST CONTENT */
.post-author { margin-top:10px; font-style:italic; color:#333; }
.post-text {
    margin-top:20px;
    font-size:16px;
    line-height:1.5;
    max-height:120px;
    overflow:hidden;
    position:relative;
    transition:max-height 0.4s ease;
}

.post-text.expanded {
    max-height: none;  /* ‚Üê Se quita el l√≠mite */
}

.ver-mas-btn { display:inline-block; color:#000; font-weight:bold; cursor:pointer; margin-top:5px; transition:0.2s; }
.ver-mas-btn:hover { color:#f4c52b; }

/* COMENTARIOS Y OTROS POSTS */
.comentarios { margin-top:40px; display:flex; gap:20px; }
.comments-container { flex:2; background:#baf46a; border-radius:15px; padding:15px; display:flex; flex-direction:column; }
.comment { background:#dfffb2; border-radius:10px; padding:8px; margin-bottom:8px; }
.otros-posts { flex:1; background:#baf46a; border-radius:15px; padding:15px; }
.otros-posts h3 { font-size:18px; margin-bottom:10px; }
.otros-posts .miniatura { border:2px solid #f4c52b; border-radius:12px; overflow:hidden; margin-bottom:12px; cursor:pointer; transition:transform 0.2s; background:#f4c52b; text-align:center; }
.otros-posts .miniatura img { width:100%; display:block; }
.otros-posts .miniatura span { display:block; font-weight:bold; margin-top:4px; font-size:14px; }
.otros-posts .miniatura:hover { transform:scale(1.05); }

.aviso-logo {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(255, 255, 0, 0.9);
  padding: 8px 12px;
  border-radius: 6px;
  box-shadow: 0 0 6px rgba(0,0,0,0.3);
  font-size: 14px;
  z-index: 9999;
  display: flex;
  align-items: center;
  gap: 8px;
  color: #000; 
  font-weight: bold; 
}

.aviso-logo button.cerrar-aviso {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  padding: 0;
  margin: 0;
  color: #000; 
}

@media (max-width: 900px){ .media-item{ width:45%; } }
@media (max-width: 520px){ .media-item{ width:90%; } }
@media (max-width: 767px) {
  header {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    height: auto;
    padding: 10px;
    gap: 10px;
  }

  .search-bar {
    order: 2;
    width: 100%;
    margin-top: 5px;
  }

  .user-info {
    order: 1;
    /*flex-direction: column;
    align-items: left;*/
    gap: 6px;
  }

  main {
    width: 80%;
     max-width: 900px;
     margin: 40px auto;
    padding: 20px;
  }

  .post-header {
    flex-direction: column;
    gap: 15px;
  }

  .post-thumbnail {
    position: relative;
    order: 2;
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
  }
   .post-content-wrapper {
    order: 1;             
    width: 100%;         
  }


  #postTitulo{
      position: static;
    margin-bottom: 10px;
    text-align: center;
  }

  .post-title-actions {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .post-actions {
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  .comentarios {
    flex-direction: column;
    gap: 20px;
  }

  .otros-posts .miniatura {
    max-width: 300px;
    margin: 0 auto 12px;
  }

 
}
</style>
</head>

<body>
<div id="pageContent">
<header>
  <div class="logo"><span class="menu-icon">‚ò∞</span> BRAZUK</div>
  <div class="search-bar"><input type="text" placeholder="Buscar..."><button>üîç</button></div>
    <!-- Contenedor del nombre y perfil -->
  <div class="user-info">
    <span id="nombreUsuario"></span>
    <div class="profile-icon" id="profileIcon">üë§</div>
  </div>
</header>

<main>
  <h2><span id="nombreUsuario"></span></h2>
  <div class="post-header">
    <div class="post-content-wrapper">
      <div class="post-title-actions">
        <h1 id="postTitulo">T√≠tulo del Post</h1>
<div class="post-actions">
  <button id="likeBtn"><i class="fa-solid fa-thumbs-up"></i> Me gusta</button>
  <button id="saveBtn"><i class="fa-solid fa-bookmark"></i> Guardar</button>
  
  <button id="TamanoTexto">
    <i class="fa-solid fa-magnifying-glass-plus"></i> Hacer Zoom
  </button>

  <button id="Marcatexto">
    <i class="fa-solid fa-highlighter"></i> Resaltar
  </button>
</div>

      </div>
      <div class="post-author" id="postAutor">por Autor del Post</div>
      <div class="post-text" id="postTexto"></div>
      <span class="ver-mas-btn" id="verMasBtn">Ver m√°s</span>
    </div>

    <div class="post-thumbnail" id="postThumbnail">
      <img src="https://picsum.photos/300/200" alt="Miniatura Post">
    </div>
  </div>

  <section class="comentarios">
    <div class="comments-container" id="comentariosContainer">
      <h3>Comentarios</h3>
    </div>
    <div class="otros-posts" id="otrosPostsContainer">
      <h3>Otros posts recomendados</h3>
    </div>
  </section>
</main>
</div>

<div class="menu-lateral" id="menuLateral">
  <button onclick="location.href='Segundo avance_Ver historial.html'">Historial</button>
  <button onclick="location.href='Segundo avance_Ver guardados.html'">Guardados</button>
  <button onclick="location.href='Segundo avance_Ver me gustas.html'">Me gusta</button>
</div>

<div class="menu-derecha" id="menuPerfil">
  <button onclick="location.href='Cuenta.html'">Cuenta</button>
  <button onclick="location.href='Segundo avance_Usuario.html'">Ver mi foro</button>

  <!-- Botones que se ocultar√°n si NO eres admin -->
  <button id="btnSolicitudes" onclick="location.href='Segundo avance_Solicitudes.html'">Solicitudes</button>
  <button id="btnBaneados" onclick="location.href='Segundo avance_Baneados.html'">Baneados</button>
  <button id="btnDadasBaja" onclick="location.href='Segundo Avance_Publicaciones baneadas.html'">Dadas de baja</button>

  <button id="toggleAspecto">Aspecto: Cla/Osc</button>
  <button onclick="location.href='BrazukaR.html'">Salir</button>
</div>


<script>
// ===== MEN√öS =====
const menuLateral = document.getElementById('menuLateral');
const menuPerfil  = document.getElementById('menuPerfil');
const pageContent = document.getElementById('pageContent');
const menuIcon    = document.querySelector('.menu-icon');
const profileIcon = document.querySelector('.profile-icon');

if (!menuLateral || !menuPerfil || !pageContent || !menuIcon || !profileIcon) {
  // Si faltara alg√∫n elemento, no hacemos nada para evitar errores.
  console.warn('Elementos de men√∫ no encontrados - revisar IDs/clases');
} else {
  // Abrir/cerrar men√∫ izquierdo
  menuIcon.addEventListener('click', (e) => {
    e.stopPropagation(); // evita que el click llegue al document
    const abrir = !menuLateral.classList.contains('abierto');

    if (abrir) {
      menuLateral.classList.add('abierto');
      menuPerfil.classList.remove('abierto');
      pageContent.style.transform = "translateX(180px)";
    } else {
      menuLateral.classList.remove('abierto');
      pageContent.style.transform = "translateX(0)";
    }
  });


//  FOTO DE PERFIL SEG√öN EL ROL

const rol = localStorage.getItem("rolUsuario");

const fotoUsuario = document.getElementById("fotoUsuario");

const fotos = {
  admin: "https://static.vecteezy.com/system/resources/previews/014/541/527/original/administrator-system-icon-simple-style-vector.jpg",
  usuario: "https://i0.wp.com/icon-library.com/images/user-icon-png-transparent/user-icon-png-transparent-17.jpg",
  invitado: "https://static.vecteezy.com/system/resources/previews/008/302/462/large_2x/eps10-grey-user-icon-or-logo-in-simple-flat-trendy-modern-style-isolated-on-white-background-free-vector.jpg"
};


// --- √çCONO DE LA ESQUINA ---
if (rol === "admin") {
  profileIcon.textContent = ""; 
  profileIcon.style.backgroundImage = `url('${fotos.admin}')`;
}
else if (rol === "usuario") {
  profileIcon.textContent = "";
  profileIcon.style.backgroundImage = `url('${fotos.usuario}')`;
}
else if (rol === "invitado") {
  profileIcon.textContent = "";
  profileIcon.style.backgroundImage = `url('${fotos.invitado}')`;
}

profileIcon.style.backgroundSize = "cover";
profileIcon.style.backgroundPosition = "center";

// Ocultar botones seg√∫n el rol
if (rol !== "admin") {
  document.getElementById("btnSolicitudes").style.display = "none";
  document.getElementById("btnBaneados").style.display = "none";
  document.getElementById("btnDadasBaja").style.display = "none";
}

  // Abrir/cerrar men√∫ derecho
  profileIcon.addEventListener('click', (e) => {
    e.stopPropagation();
    const abrir = !menuPerfil.classList.contains('abierto');

    if (abrir) {
      menuPerfil.classList.add('abierto');
      menuLateral.classList.remove('abierto');
      pageContent.style.transform = "translateX(-180px)";
    } else {
      menuPerfil.classList.remove('abierto');
      pageContent.style.transform = "translateX(0)";
    }
  });

  // Evitar que clicks DENTRO de los paneles lleguen al document (asi no se cierra ni se resetea transform)
  menuLateral.addEventListener('click', e => e.stopPropagation());
  menuPerfil.addEventListener('click', e => e.stopPropagation());

  // Click global: cerramos SOLO si el click ocurri√≥ fuera de LOS DOS paneles y fuera de los botones
  document.addEventListener('click', (e) => {
    const clickEnMenuIzq = menuLateral.contains(e.target) || menuIcon.contains(e.target);
    const clickEnMenuDer = menuPerfil.contains(e.target) || profileIcon.contains(e.target);

    // Si el click NO fue ni en el men√∫ ni en sus botones, cerrar todo y restaurar transform
    if (!clickEnMenuIzq && !clickEnMenuDer) {
      menuLateral.classList.remove('abierto');
      menuPerfil.classList.remove('abierto');
      pageContent.style.transform = "translateX(0)";
    }
    // Si el click fue dentro de un men√∫, NO hacer nada (por eso detenemos la propagaci√≥n antes)
  });

  // Cerrar con ESC por accesibilidad
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      menuLateral.classList.remove('abierto');
      menuPerfil.classList.remove('abierto');
      pageContent.style.transform = "translateX(0)";
    }
  });
}



// ===== DATOS DEL POST =====
let postsData = {
  "1": { titulo:"Conversaci√≥n sobre f√∫tbol", autor:"Usuario123", texto:"Hoy hablamos sobre los mejores goles de la temporada, estrategias y curiosidades del f√∫tbol mundial. ".repeat(25), thumbnail:"https://imagenes.eleconomista.com.mx/files/image_1000_1000/uploads/2024/07/20/66e956f061db0.png", comentarios:["¬°Gran tema! ‚öΩ","Me encantan estas discusiones.","Muy interesante, gracias por compartir.","Quiero ver m√°s posts as√≠."] },
  "2": { titulo:"Gu√≠a de las ciudades de la Copa del Mundo 2026: M√©xico, Estados Unidos y Canad√°", autor:"Gabreil Max", texto:"¬øQu√© ofrecen las sedes elegidas por la FIFA para albergar la competici√≥n que seguir√° a la de Qatar 2022, cu√°les son sus estadios y qu√© historia tienen con el deporte? Aqu√≠ una breve gu√≠a. ".repeat(50), thumbnail:"https://cdn-3.expansion.mx/dims4/default/6a5ee1c/2147483647/strip/true/crop/1200x628+0+0/resize/3600x1884!/format/webp/quality/80/?url=https%3A%2F%2Fcdn-3.expansion.mx%2F5a%2F30%2Fff12b02f477a8c66b888f3411b3e%2Fdonde-sera-mundial-2026-ciudades-sede-guia.jpg", comentarios:["Excelente gu√≠a!","Me ayud√≥ mucho üòé","Tal vez ahorre para el mundial.","Gracias por la info!"] },
  "3": { titulo:"Mascotas del Mundial 2026: c√≥mo se llaman y qu√© significan", autor:"Xavier mm", texto:"¬°Por fin la FIFA present√≥ a las mascotas del Mundial 2026! Entre el precio de los boletos, la salida a venta de las entradas, los equipos, los horarios, los estadios y dem√°s informaci√≥n crucial, puediera parecer menos relevante conocer a los animales que protagonizar√°n el esperado torneo. ".repeat(25), thumbnail:"https://media.glamour.mx/photos/68d71d27e9e62282c0bc90a8/16:9/w_2240,c_limit/mascotas-del-mundial-2026.jpg", comentarios:["Qu√© buena info!","Esta bonito","Gracias por compartir.","Muy padre disenos."] }
};

let urlParams = new URLSearchParams(window.location.search);
let postId = urlParams.get("post") || localStorage.getItem("postId") || "1";
let post = postsData[postId];

// ===== ELEMENTOS =====
const postTitulo = document.getElementById("postTitulo");
const postAutor = document.getElementById("postAutor");
const postTexto = document.getElementById("postTexto");
const postThumbnail = document.getElementById("postThumbnail").querySelector("img");
const comentariosContainer = document.getElementById("comentariosContainer");
const otrosPostsContainer = document.getElementById("otrosPostsContainer");
const likeBtn = document.getElementById('likeBtn');
const saveBtn = document.getElementById('saveBtn');
const HBtn= document.getElementById('TamanoTexto');
const MarkBtn=document.getElementById('Marcatexto');
const verMasBtn = document.getElementById("verMasBtn");

// ===== LIKE & GUARDAR =====
likeBtn.onclick = () => {
  likeBtn.classList.toggle("active");
  const liked = likeBtn.classList.contains("active");

  // Guardamos el estado de ‚Äúlike‚Äù con id del post
  localStorage.setItem(`like_post_${postId}`, liked);

  if (liked) {
    // Guardar datos completos del post para "Ver Me gusta"
    const postData = {
      id: postId,
      url: window.location.href,
      thumbnail: postThumbnail.src,
      titulo: postTitulo.textContent,
      autor: postAutor.textContent.replace(/^por\s+/, ''), // quitar "por "
      tipo: 'post',  // tipo de contenido
      timestamp: Date.now()
    };
    localStorage.setItem(`post_like_${postId}`, JSON.stringify(postData));
  } else {
    // Si se quita el like, eliminar del almacenamiento
    localStorage.removeItem(`post_like_${postId}`);
  }
};

saveBtn.onclick = () => {
  saveBtn.classList.toggle("active");
  const guardado = saveBtn.classList.contains("active");

  // Guardamos el estado de ‚Äúguardado‚Äù como antes
  localStorage.setItem(`save_post_${postId}`, guardado);

  if (guardado) {
    // Guardar datos completos del post
    const postGuardado = {
      id: postId,
      url: window.location.href,
      thumbnail: postThumbnail.src,
      titulo: postTitulo.textContent,
      autor: postAutor.textContent.replace(/^por\s+/, ''), // quitar ‚Äúpor ‚Äù
      texto: postTexto.textContent,
      timestamp: Date.now()
    };
    localStorage.setItem(`post_guardado_${postId}`, JSON.stringify(postGuardado));
  } else {
    // Eliminar del almacenamiento si se desmarca
    localStorage.removeItem(`post_guardado_${postId}`);
  }
};



HBtn.onclick = () => {
  HBtn.classList.toggle("active");

  if (HBtn.classList.contains("active")) {
    postTexto.style.fontSize = "45px";
  } else {
    postTexto.style.fontSize = "16px";
  }

  // Si est√° expandido, recalcular altura
  if (postTexto.classList.contains("expanded")) {
    postTexto.style.maxHeight = postTexto.scrollHeight + "px";
  }
};


MarkBtn.onclick = () => {
  MarkBtn.classList.toggle("active");
  const Text = document.getElementById('postTexto');

  if (MarkBtn.classList.contains("active")) {
    Text.innerHTML = `<mark>${Text.textContent}</mark>`;
  } else {
    Text.innerHTML = Text.textContent; // quitar el resaltado
  }
};


// ===== Ver m√°s / Ver menos =====
verMasBtn.onclick = () => {
    const expanded = postTexto.classList.toggle("expanded");
    
    if (expanded) {
        // Expandir din√°micamente animado
        postTexto.style.maxHeight = postTexto.scrollHeight + "px";
        verMasBtn.textContent = "Ver menos";
    } else {
        // Volver al tama√±o inicial
        postTexto.style.maxHeight = "120px";
        verMasBtn.textContent = "Ver m√°s";
    }
};


// ===== FUNCIONES =====
function cargarPost() {
  postTitulo.textContent = post.titulo;
  postAutor.textContent = "por " + post.autor;
  postTexto.textContent = post.texto;
  postThumbnail.src = post.thumbnail;

  // Comentarios
  comentariosContainer.innerHTML = "<h3>Comentarios</h3>";
  (post.comentarios || []).forEach(texto => {
    const div = document.createElement('div');
    div.className = 'comment';
    div.textContent = texto;
    comentariosContainer.appendChild(div);
  });

  // Otros posts recomendados
  otrosPostsContainer.innerHTML = "<h3>Otros posts recomendados</h3>";
  for(let id in postsData){
    if(id!==postId){
      const miniatura = document.createElement('div');
      miniatura.className="miniatura";
      const img = document.createElement('img');
      img.src = postsData[id].thumbnail;
      miniatura.appendChild(img);
      const span = document.createElement('span');
      span.textContent = postsData[id].titulo;
      miniatura.appendChild(span);
      miniatura.onclick = () => {
        postId = id;
        post = postsData[postId];
        cargarPost();
        localStorage.setItem("postId", postId);
        window.scrollTo({ top:0, behavior:"smooth" });
        const newUrl = window.location.pathname + "?post=" + postId;
        window.history.replaceState(null,"",newUrl);
      };
      otrosPostsContainer.appendChild(miniatura);
    }
  }

  // Estado botones
  likeBtn.classList.toggle('active', localStorage.getItem(`like_post_${postId}`)==="true");
  saveBtn.classList.toggle('active', localStorage.getItem(`save_post_${postId}`)==="true");
}

// ===== INICIALIZACI√ìN =====
cargarPost();

// ===== LOGO =====
document.querySelector('.logo').onclick = () => { window.location.href = "Segundo avance_Pagina Principal.html"; };
// ===== Modo claro/oscuro global para todas las p√°ginas =====
(function(){
  const menuPerfil = document.getElementById('menuPerfil');
  if(!menuPerfil) return;

  const btnModo = menuPerfil.querySelector('button:nth-child(6)'); 

  function aplicarModo(modo){
    const body = document.body;
    const pageContent = document.getElementById('pageContent');
    const header = document.querySelector('header');
    const logo = document.querySelector('.logo');

    const titulosSeccion = document.querySelectorAll('.content-section h2');
    const controles = document.querySelectorAll('.ver-mas, .ver-menos');
    const titulosMiniaturas = document.querySelectorAll('.media-item span');
    const nombreUsuarioSpan = document.getElementById('nombreUsuario');

    if(modo==='oscuro'){
      body.style.background='#000';
      if(pageContent) pageContent.style.background='#111';
      header.style.background='#000';
      if(logo) logo.style.color='#fff';
      nombreUsuarioSpan.style.color = '#fff'; 

      titulosSeccion.forEach(h2=>h2.style.color='#000');
      controles.forEach(btn=>btn.style.color='#000');
      titulosMiniaturas.forEach(span=>span.style.color='#000');
    } else {
      body.style.background='#fff';
      if(pageContent) pageContent.style.background='#fff';
      header.style.background='#f4c52b';
      if(logo) logo.style.color='#000';
      nombreUsuarioSpan.style.color = '#000'; 


      titulosSeccion.forEach(h2=>h2.style.color='#000');
      controles.forEach(btn=>btn.style.color='#000');
      titulosMiniaturas.forEach(span=>span.style.color='#000');
    }
  }

  // Aplicar modo guardado al cargar la p√°gina
  let modoGuardado = localStorage.getItem('modoBrazuk') || 'claro';
  aplicarModo(modoGuardado);

  // Cambiar modo al hacer clic en el bot√≥n
  btnModo.addEventListener('click', ()=>{
    modoGuardado = (modoGuardado==='claro')?'oscuro':'claro';
    localStorage.setItem('modoBrazuk', modoGuardado);
    aplicarModo(modoGuardado);
  });
})();

// ===== FUNCION PARA AGREGAR AL HISTORIAL =====
function agregarAlHistorial(postId, post) {
  let historial = JSON.parse(localStorage.getItem('brazukHistorial') || '[]');

  // Crear identificador √∫nico combinando pathname + postId
  const identificador = window.location.pathname + "_post_" + postId;

  // Evitar duplicados
  historial = historial.filter(p => p.key !== identificador);

  // Agregar al inicio
  historial.unshift({
    key: identificador,
    id: postId,
    titulo: post.titulo,
    autor: post.autor,
    thumbnail: post.thumbnail,
    url: window.location.pathname + "?post=" + postId,
    timestamp: Date.now()
  });

  localStorage.setItem('brazukHistorial', JSON.stringify(historial));
}


// ===== FUNCION CARGAR POST =====
function cargarPost() {
  postTitulo.textContent = post.titulo;
  postAutor.textContent = "por " + post.autor;
  postTexto.textContent = post.texto;
  postThumbnail.src = post.thumbnail;

  // Comentarios
  comentariosContainer.innerHTML = "<h3>Comentarios</h3>";
  (post.comentarios || []).forEach(texto => {
    const div = document.createElement('div');
    div.className = 'comment';
    div.textContent = texto;
    comentariosContainer.appendChild(div);
  });

  // Otros posts recomendados
  otrosPostsContainer.innerHTML = "<h3>Otros posts recomendados</h3>";
  for(let id in postsData){
    if(id!==postId){
      const miniatura = document.createElement('div');
      miniatura.className="miniatura";
      const img = document.createElement('img');
      img.src = postsData[id].thumbnail;
      miniatura.appendChild(img);
      const span = document.createElement('span');
      span.textContent = postsData[id].titulo;
      miniatura.appendChild(span);

      miniatura.onclick = () => {
        postId = id;
        post = postsData[postId];
        cargarPost();
        localStorage.setItem("postId", postId);
        window.scrollTo({ top:0, behavior:"smooth" });
        const newUrl = window.location.pathname + "?post=" + postId;
        window.history.replaceState(null,"",newUrl);

        // Guardar autom√°ticamente en historial
        agregarAlHistorial(postId, post);
      };

      otrosPostsContainer.appendChild(miniatura);
    }
  }

  // Estado botones
  likeBtn.classList.toggle('active', localStorage.getItem(`like_post_${postId}`)==="true");
  saveBtn.classList.toggle('active', localStorage.getItem(`save_post_${postId}`)==="true");

  // Guardar en historial al cargar el post
  agregarAlHistorial(postId, post);
}

// ===== INICIALIZACI√ìN =====
cargarPost();
const nombre = localStorage.getItem("nombreUsuario") || "Invitado";
document.getElementById("nombreUsuario").textContent = `${nombre}`;
</script>

<div id="avisoLogo" class="aviso-logo">
  <span>Aqui puedes leer sobre lo que hablan ahora de los mundiales, encuentra mas abajo</span>
  <button class="cerrar-aviso">√ó</button>
</div>
<script>
  document.querySelector(".cerrar-aviso").addEventListener("click", function () {
    document.getElementById("avisoLogo").style.display = "none";
  });
</script>

</body>
</html>
